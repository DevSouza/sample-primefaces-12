<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<h:head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
		
		<!-- CSS -->
		<h:outputStylesheet library="css" name="global.css" />
		
		<title>Clientes</title>
	</h:head>

	<h:body>
		<div style="margin: 1rem;">
			
			<h1>Clientes</h1>
			
			<div style="margin: 1rem; display: flex; justify-content: end;">
				<p:button
					value="Novo Cliente"
					outcome="/new.xhtml" />
			</div>		
					
			<h:form>
				<p:growl>
					<p:autoUpdate />
				</p:growl>
				<p:dataTable
					value="#{retrivingCustomerBean.customers}"
					var="customer"
					emptyMessage="Nenhum cliente encontrado.">
		
					<p:column headerText="Nome">
						<p:outputLabel value="#{customer.fullname}"/>
					</p:column>
					<p:column headerText="Tipo">
						<p:outputLabel value="#{customer.type.description}"/>
					</p:column>
					<p:column headerText="Numero Documento">
						<p:outputLabel value="#{customer.federalIdentificationNumber}"/>
					</p:column>
					<p:column width="120">
						<div style="display: flex; gap: 1rem">
							<p:button icon="pi pi-pencil" outcome="/edit.xhtml">
								<f:param name="customerId" value="#{customer.customerId}"/>
							</p:button>
							<p:commandButton actionListener="#{retrivingCustomerBean.remove(customer.customerId)}" icon="pi pi-trash" styleClass="ui-button-danger" update="@form"/>
						</div>
					</p:column>
				</p:dataTable>
			</h:form>
		</div>
    </h:body>
</html>